var venders=["bithumb","korbit","coinone"],currencys=["btc","bch","btg","eth","xrp"],ticker={bithumb:{},korbit:{},coinone:{},coinmarket:{}},homepage={bithumb:"https://www.bithumb.com",korbit:"https://www.korbit.co.kr",coinone:"https://coinone.co.kr"};function computePrimium(){for(currency of currencys){var a=ticker.coinmarket[currency],b=0;for(vender of venders)b+=+ticker[vender][currency];b/=venders.length;var c=100*(b-a)/a;document.getElementById(currency+"-average").innerHTML=(+(+b).toFixed(0)).toLocaleString(),document.getElementById(currency+"-primium").innerHTML=(+c).toFixed(2)+"%"}}function getMaxVender(a){var b=venders[0];for(vender of venders)ticker[vender][a]>ticker[b][a]&&(b=vender);return b}function getMinVender(a){var b=venders[0];for(vender of venders)ticker[vender][a]<ticker[b][a]&&(b=vender);return b}function computeLeverage(){for(currency of currencys){var a=getMaxVender(currency),b=getMinVender(currency);document.getElementById(currency+"-leverage").innerHTML=a+" - "+b;var c=100*(ticker[a][currency]-ticker[b][currency])/ticker[b][currency];document.getElementById(currency+"-leverage-percent").innerHTML=(+c).toFixed(2)+" %"}}function setBithumbPrice(a,b){var c=b.data[a.toUpperCase()];ticker.bithumb[a]=+c.closing_price,document.getElementById(a+"-bithumb").innerHTML=(+c.closing_price).toLocaleString(),document.getElementById(a+"-change-bithumb").innerHTML=(+(100*(c.closing_price-c.opening_price)/c.opening_price)).toFixed(2)+"%",c.closing_price>c.opening_price?(document.getElementById(a+"-change-bithumb").style.color="red",document.getElementById(a+"-change-bithumb").innerHTML+=" <img src=http://static.naver.net/nfinance/ico_up.gif style='vertical-align:middle'>"):(document.getElementById(a+"-change-bithumb").style.color="blue",document.getElementById(a+"-change-bithumb").innerHTML+=" <img src=http://static.naver.net/nfinance/ico_down.gif style='vertical-align:middle'>")}function fetchBithumb(){return fetch("https://api.bithumb.com/public/ticker/all").then(function(a){return a.json()}).then(function(a){for(currency of currencys)setBithumbPrice(currency,a)})}function fetchKorbit(){return fetch("https://conanoc-eval-prod.apigee.net/korbit").then(function(a){return a.json()}).then(function(a){for(currency of currencys)ticker.korbit[currency]=+a[currency].last,document.getElementById(currency+"-korbit").innerHTML=(+a[currency].last).toLocaleString()})}function fetchCoinone(){return fetch("https://conanoc-eval-prod.apigee.net/coinone").then(function(a){return a.json()}).then(function(a){for(currency of currencys)ticker.coinone[currency]=+a[currency].last,document.getElementById(currency+"-coinone").innerHTML=(+a[currency].last).toLocaleString()})}function fetchCoinmarket(){return fetch("https://api.coinmarketcap.com/v1/ticker/?convert=krw&limit=20").then(function(a){return a.json()}).then(function(a){for(item of a){var b=item.symbol.toLowerCase();currencys.includes(b)&&(ticker.coinmarket[b]=+item.price_krw,document.getElementById(b+"-coinmarket").innerHTML=(+(+item.price_krw).toFixed()).toLocaleString(),document.getElementById(b+"-change-coinmarket").innerHTML=(+item.percent_change_24h).toFixed(2)+"%",0<item.percent_change_24h?(document.getElementById(b+"-change-coinmarket").style.color="red",document.getElementById(b+"-change-coinmarket").innerHTML+=" <img src=http://static.naver.net/nfinance/ico_up.gif style='vertical-align:middle'>"):(document.getElementById(b+"-change-coinmarket").style.color="blue",document.getElementById(b+"-change-coinmarket").innerHTML+=" <img src=http://static.naver.net/nfinance/ico_down.gif style='vertical-align:middle'>"))}})}function getTableBody(a,b=!1){var c="";for(currency of currencys){if(c+="<tr><td align=center>"+currency.toUpperCase()+"</td>",b){c+="<td id="+currency+"-leverage align=center>0</td>",c+="<td id="+currency+"-leverage-percent align=right>0</td>",c+="</tr>";continue}for(vender of a)c+="<td id="+currency+"-"+vender+" align=right>0</td>",("bithumb"==vender||"coinmarket"==vender)&&(c+="<td id="+currency+"-change-"+vender+" align=right>-</td>"),"coinmarket"==vender&&(c+="<td id="+currency+"-average align=right>0</td>",c+="<td id="+currency+"-primium align=right>0</td>");c+="</tr>"}return c}function writeTable(){for(vender of venders)document.getElementById("currency-header-local").innerHTML+="<th><a target=_ href="+homepage[vender]+">"+vender+"</a></th>","bithumb"==vender&&(document.getElementById("currency-header-local").innerHTML+="<th>24H</th>");document.getElementById("currency-header-leverage").innerHTML+="<th>\uB808\uBC84\uB9AC\uC9C0</th>",document.getElementById("currency-header-leverage").innerHTML+="<th>\uB808\uBC84\uB9AC\uC9C0 %</th>",document.getElementById("currency-header-primium").innerHTML+="<th>coinmarket</th>",document.getElementById("currency-header-primium").innerHTML+="<th>24H</th>",document.getElementById("currency-header-primium").innerHTML+="<th>\uAD6D\uB0B4\uD3C9\uADE0</th>",document.getElementById("currency-header-primium").innerHTML+="<th>\uAE40\uD504</th>",document.getElementById("currency-tbody-local").innerHTML=getTableBody(venders),document.getElementById("currency-tbody-leverage").innerHTML=getTableBody(null,!0),document.getElementById("currency-tbody-primium").innerHTML=getTableBody(["coinmarket"])}function loadPage(){writeTable();var a=fetchBithumb(),b=fetchKorbit(),c=fetchCoinone(),d=fetchCoinmarket();Promise.all([a,c,b,d]).then(function(){computePrimium(),computeLeverage()})}